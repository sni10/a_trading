"""Интерфейс (протокол) логгера для доменного слоя.

Призван разорвать прямую зависимость домена от инфраструктурного
модуля ``logging_setup`` и зафиксировать минимальный контракт для
логирования внутри бизнес‑логики.

Реализации могут делегировать вызовы стандартному ``logging``,
адаптерам поверх существующей инфраструктуры или мокам в юнит‑тестах.
"""

from __future__ import annotations

import logging
from typing import Protocol, runtime_checkable


@runtime_checkable
class ILogger(Protocol):
    """Абстракция логгера, используемая доменным кодом.

    Контракт минимально отражает текущие потребности прототипа:

    * stage‑логирование с явным указанием этапа конвейера;
    * шорткаты для основных уровней логирования.

    Интерфейс умышленно не навязывает деталей конфигурации логгера
    (форматеры, хендлеры, файлы и т.п.) и независим от слоя
    ``infrastructure``. В тестах можно подменять его простыми
    реализациями, собирающими сообщения в память.
    """

    def log_stage(self, stage: str, msg: str, *, level: int = logging.INFO) -> None:
        """Залогировать сообщение для указанного этапа конвейера.

        Args:
            stage: Имя этапа/подсистемы ("TICK", "ORDERBOOK", "EXECUTION" и т.п.).
            msg: Текст сообщения.
            level: Уровень логирования в терминах ``logging``.
        """

    def log_info(self, msg: str) -> None:
        """Залогировать информационное сообщение (INFO)."""

    def log_warning(self, msg: str) -> None:
        """Залогировать предупреждение (WARNING)."""

    def log_error(self, msg: str) -> None:
        """Залогировать сообщение об ошибке (ERROR)."""

    def log_debug(self, msg: str) -> None:
        """Залогировать отладочное сообщение (DEBUG)."""


__all__ = ["ILogger"]
